<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ëŒ€ìˆœë´„ â€” í™ˆ</title>
  <meta name="description" content="ëŒ€ìˆœë´„ â€” ê³µì§€ì™€ ê²Œì‹œíŒì´ ìˆëŠ” ê°„ë‹¨í•œ í™ˆí˜ì´ì§€" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='46' fill='%230099ff'/%3E%3Ctext x='50' y='60' text-anchor='middle' font-size='52' font-family='Arial' fill='white'%3Eë´„%3C/text%3E%3C/svg%3E">
  <style>
    :root{
      --bg: #0b1020;
      --card: #121a32;
      --muted: #94a3b8;
      --text: #e5e7eb;
      --accent: #4f46e5;
      --accent-2: #22d3ee;
      --ring: rgba(34,211,238,.35);
      --shadow: 0 20px 45px rgba(0,0,0,.35);
      --radius: 20px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI",
                   Roboto, "Noto Sans KR", "Apple SD Gothic Neo", Pretendard, Arial, sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 600px at 10% 0%, rgba(79,70,229,.25), transparent 60%),
                  radial-gradient(1000px 600px at 90% 0%, rgba(34,211,238,.2), transparent 60%),
                  var(--bg);
      line-height: 1.6;
    }
    a { color: var(--accent-2); text-decoration: none; }
    a:hover { text-decoration: underline; }
    header {
      position: sticky; top: 0; z-index: 10;
      backdrop-filter: saturate(1.3) blur(8px);
      background: linear-gradient(to bottom, rgba(11,16,32,.9), rgba(11,16,32,.5));
      border-bottom: 1px solid rgba(99,102,241,.2);
    }
    .container { max-width: 1100px; margin: 0 auto; padding: 24px; }
    .brand { display: flex; align-items: center; gap: 14px; }
    .logo {
      width: 36px; height: 36px; border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #22d3ee, #4f46e5);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.15), 0 4px 16px rgba(34,211,238,.35);
    }
    .title { font-weight: 800; letter-spacing: -.02em; font-size: 22px; }
    .grid {
      display: grid; gap: 24px; margin-top: 24px;
      grid-template-columns: 1.1fr .9fr;
    }
    @media (max-width: 960px) {
      .grid { grid-template-columns: 1fr; }
    }
    .card {
      background: linear-gradient(180deg, rgba(18,26,50,.9), rgba(18,26,50,.8));
      border: 1px solid rgba(148,163,184,.12);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .card .inner { padding: 24px; }
    .card h2 {
      margin: 0 0 12px; font-size: 22px; letter-spacing: -.01em;
    }
    .muted { color: var(--muted); }
    .greeting {
      display: grid; gap: 10px;
      background:
        radial-gradient(400px 120px at 0% 0%, rgba(34,211,238,.08), transparent 60%),
        radial-gradient(500px 180px at 100% 0%, rgba(79,70,229,.07), transparent 60%);
      border: 1px solid rgba(255,255,255,.06);
    }
    .greeting h1 {
      font-size: 28px; margin: 0 0 8px; letter-spacing: -.02em;
    }
    .tip {
      margin-top: 8px; font-size: 14px; color: var(--muted);
    }
    .list { display: grid; gap: 12px; padding: 0; margin: 0; list-style: none; }
    .item {
      border: 1px solid rgba(148,163,184,.12);
      border-radius: 14px; padding: 14px 16px;
      background: linear-gradient(180deg, rgba(18,26,50,.65), rgba(18,26,50,.5));
    }
    .item h3 { margin: 0 0 6px; font-size: 18px; }
    .meta { display: flex; gap: 10px; font-size: 12px; color: var(--muted); }
    .form {
      display: grid; gap: 10px; margin-top: 14px;
    }
    input[type="text"], textarea {
      width: 100%; padding: 12px 14px; border-radius: 12px;
      border: 1px solid rgba(148,163,184,.25);
      background: rgba(255,255,255,.03); color: var(--text);
      outline: none; transition: box-shadow .15s ease, border-color .15s ease;
    }
    input[type="text"]:focus, textarea:focus {
      border-color: var(--accent-2);
      box-shadow: 0 0 0 4px var(--ring);
    }
    textarea { min-height: 110px; resize: vertical; }
    .row { display: grid; gap: 10px; grid-template-columns: 1fr 1fr; }
    @media (max-width: 640px){ .row{ grid-template-columns: 1fr; } }
    .btn {
      padding: 12px 16px; border: 0; border-radius: 12px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: white; font-weight: 700; letter-spacing: .02em;
      cursor: pointer; transition: transform .06s ease, filter .2s ease;
    }
    .btn:hover { filter: brightness(1.07); }
    .btn:active { transform: translateY(1px); }
    .empty { color: var(--muted); padding: 12px; border: 1px dashed rgba(148,163,184,.3); border-radius: 12px; text-align: center; }
    .search { display: flex; gap: 10px; align-items: center; }
    .pill { font-size: 12px; padding: 4px 8px; border-radius: 999px; background: rgba(34,211,238,.16); border: 1px solid rgba(34,211,238,.35); color: #c0f6ff; }
    footer { margin: 40px 0 60px; text-align: center; color: var(--muted); font-size: 14px; }
    .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, monospace; border:1px solid rgba(148,163,184,.25); border-bottom-width:2px; padding:2px 6px; border-radius:8px; background:rgba(255,255,255,.04);}
  </style>
</head>
<body>
  <header>
    <div class="container brand">
      <div class="logo" aria-hidden="true"></div>
      <div class="title">ëŒ€ìˆœë´„</div>
      <div style="margin-left:auto" class="muted">ê³µì§€ Â· ê²Œì‹œíŒ</div>
    </div>
  </header>

  <main class="container">
    <!-- ì‚¬ì´íŠ¸ì§€ê¸° ì¸ì‚¬ë§ -->
    <section class="card greeting">
      <div class="inner">
        <h1>ì•ˆë…•í•˜ì„¸ìš” ğŸ‘‹ ì‚¬ì´íŠ¸ì§€ê¸°ì…ë‹ˆë‹¤.</h1>
        <p class="muted">ì´ê³³ì€ ëŒ€ìˆœë´„ì˜ ì†Œì‹ì„ ì „í•˜ëŠ” ì‘ì€ ê³µê°„ì…ë‹ˆë‹¤. ìœ„ìª½ì€ ê³µì§€, ì•„ë˜ëŠ” ììœ  ê²Œì‹œíŒì´ì—ìš”. ëª¨ë°”ì¼ì—ì„œë„ í¸í•˜ê²Œ ë³´ì‹¤ ìˆ˜ ìˆë„ë¡ ê°€ë³ê²Œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.</p>
        <p class="tip">â€» ë³¸ í˜ì´ì§€ëŠ” ì •ì (Static) ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤. ê²Œì‹œë¬¼ì€ ë¸Œë¼ìš°ì € <b>localStorage</b>ì— ì €ì¥ë˜ë¯€ë¡œ, ê°™ì€ ì»´í“¨í„°/ë¸Œë¼ìš°ì €ì—ì„œë§Œ ê³„ì† ë³´ì…ë‹ˆë‹¤.</p>
      </div>
    </section>

    <div class="grid">
      <!-- ê³µì§€ -->
      <section class="card" aria-labelledby="noticeTitle">
        <div class="inner">
          <h2 id="noticeTitle">ê³µì§€</h2>
          <ul id="noticeList" class="list" aria-live="polite"></ul>
          <div id="noticeEmpty" class="empty" hidden>ë“±ë¡ëœ ê³µì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</div>

          <details class="form" style="margin-top:12px;">
            <summary class="muted">ê³µì§€ ì¶”ê°€í•˜ê¸°</summary>
            <div class="row">
              <input id="noticeTitleInput" type="text" placeholder="ì œëª©" aria-label="ê³µì§€ ì œëª©" />
              <input id="noticeAuthorInput" type="text" placeholder="ì‘ì„±ì" aria-label="ê³µì§€ ì‘ì„±ì" />
            </div>
            <textarea id="noticeBodyInput" placeholder="ë‚´ìš©" aria-label="ê³µì§€ ë‚´ìš©"></textarea>
            <button class="btn" id="addNoticeBtn">ê³µì§€ ë“±ë¡</button>
          </details>
        </div>
      </section>

      <!-- ê²Œì‹œíŒ -->
      <section class="card" aria-labelledby="boardTitle">
        <div class="inner">
          <h2 id="boardTitle">ê²Œì‹œíŒ</h2>
          <div class="search" style="margin-bottom:10px;">
            <input id="searchInput" type="text" placeholder="ê²€ìƒ‰: ì œëª©/ì‘ì„±ì/ë‚´ìš©" aria-label="ê²Œì‹œíŒ ê²€ìƒ‰" />
            <span class="pill" id="countPill">0ê°œ</span>
          </div>
          <ul id="boardList" class="list" aria-live="polite"></ul>
          <div id="boardEmpty" class="empty" hidden>ì²« ê¸€ì„ ë‚¨ê²¨ì£¼ì„¸ìš”!</div>

          <div class="form">
            <div class="row">
              <input id="postTitle" type="text" placeholder="ì œëª©" aria-label="ê²Œì‹œê¸€ ì œëª©" />
              <input id="postAuthor" type="text" placeholder="ì‘ì„±ì" aria-label="ê²Œì‹œê¸€ ì‘ì„±ì" />
            </div>
            <textarea id="postBody" placeholder="ë‚´ìš©" aria-label="ê²Œì‹œê¸€ ë‚´ìš©"></textarea>
            <button class="btn" id="postBtn">ê²Œì‹œí•˜ê¸°</button>
          </div>
        </div>
      </section>
    </div>

    <footer>Â© <span id="year"></span> ëŒ€ìˆœë´„. All rights reserved.</footer>
  </main>

  <script>
    // --- Utilities ---
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));
    const fmtDate = (d) => new Date(d).toLocaleString("ko-KR", { dateStyle: "medium", timeStyle: "short" });

    const LS_KEYS = {
      NOTICE: "dsb_notice_v1",
      BOARD: "dsb_board_v1"
    };

    // --- Seed sample data on first load ---
    function ensureSeed() {
      if (!localStorage.getItem(LS_KEYS.NOTICE)) {
        const seed = [
          { id: (crypto.randomUUID ? crypto.randomUUID() : String(Math.random())).toString(), title: "ì‚¬ì´íŠ¸ ì˜¤í”ˆ", author: "ê´€ë¦¬ì", body: "ëŒ€ìˆœë´„ ì›¹í˜ì´ì§€ê°€ ê³µê°œë˜ì—ˆìŠµë‹ˆë‹¤. ë§ì€ ê´€ì‹¬ ë¶€íƒë“œë¦½ë‹ˆë‹¤!", createdAt: Date.now() },
          { id: (crypto.randomUUID ? crypto.randomUUID() : String(Math.random())).toString(), title: "ê²Œì‹œíŒ ì´ìš© ì•ˆë‚´", author: "ê´€ë¦¬ì", body: "ì˜ˆì˜ì™€ ë°°ë ¤ë¥¼ ì§€ì¼œì£¼ì„¸ìš”. ìƒì—…ì„± ê¸€ì€ ì‚­ì œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", createdAt: Date.now() }
        ];
        localStorage.setItem(LS_KEYS.NOTICE, JSON.stringify(seed));
      }
      if (!localStorage.getItem(LS_KEYS.BOARD)) {
        const seed = [
          { id: (crypto.randomUUID ? crypto.randomUUID() : String(Math.random())).toString(), title: "ì²« ì¸ì‚¬ ë“œë¦½ë‹ˆë‹¤", author: "ë°©ë¬¸ì", body: "ì•ˆë…•í•˜ì„¸ìš”! ì‘ì›í•©ë‹ˆë‹¤ :)", createdAt: Date.now() }
        ];
        localStorage.setItem(LS_KEYS.BOARD, JSON.stringify(seed));
      }
    }

    // --- Notice ---
    function loadNotices() {
      const data = JSON.parse(localStorage.getItem(LS_KEYS.NOTICE) || "[]").sort((a,b)=>b.createdAt-a.createdAt);
      const list = $("#noticeList");
      list.innerHTML = "";
      if (!data.length) { $("#noticeEmpty").hidden = false; return; }
      $("#noticeEmpty").hidden = true;
      for (const n of data) {
        const li = document.createElement("li");
        li.className = "item";
        li.innerHTML = \`
          <h3>\${n.title}</h3>
          <div class="meta">
            <span>ì‘ì„±ì: \${n.author || "ê´€ë¦¬ì"}</span>
            <span>Â·</span>
            <span>\${fmtDate(n.createdAt)}</span>
          </div>
          <div class="muted">\${(n.body||"").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("\n","<br>")}</div>
          <div style="margin-top:8px; display:flex; gap:8px;">
            <button class="btn" style="padding:8px 12px; font-size:12px;" data-id="\${n.id}" data-type="notice" onclick="handleDelete(event)">ì‚­ì œ</button>
          </div>
        \`;
        list.appendChild(li);
      }
    }

    // --- Board ---
    function loadBoard(filter="") {
      const data = JSON.parse(localStorage.getItem(LS_KEYS.BOARD) || "[]").sort((a,b)=>b.createdAt-a.createdAt);
      const list = $("#boardList");
      list.innerHTML = "";
      const q = filter.trim().toLowerCase();
      const filtered = q ? data.filter(p => [p.title,p.author,p.body].some(t => (t||"").toLowerCase().includes(q))) : data;
      $("#countPill").textContent = filtered.length + "ê°œ";
      if (!filtered.length) { $("#boardEmpty").hidden = false; return; }
      $("#boardEmpty").hidden = true;
      for (const p of filtered) {
        const li = document.createElement("li");
        li.className = "item";
        li.innerHTML = \`
          <h3>\${p.title}</h3>
          <div class="meta">
            <span>ì‘ì„±ì: \${p.author || "ìµëª…"}</span>
            <span>Â·</span>
            <span>\${fmtDate(p.createdAt)}</span>
          </div>
          <div class="muted">\${(p.body||"").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("\n","<br>")}</div>
          <div style="margin-top:8px; display:flex; gap:8px;">
            <button class="btn" style="padding:8px 12px; font-size:12px;" data-id="\${p.id}" data-type="board" onclick="handleDelete(event)">ì‚­ì œ</button>
          </div>
        \`;
        list.appendChild(li);
      }
    }

    function handleDelete(e){
      const id = e.target.dataset.id;
      const type = e.target.dataset.type;
      const key = type === "notice" ? LS_KEYS.NOTICE : LS_KEYS.BOARD;
      const data = JSON.parse(localStorage.getItem(key) || "[]").filter(x => x.id !== id);
      localStorage.setItem(key, JSON.stringify(data));
      if (type === "notice") loadNotices(); else loadBoard($("#searchInput").value);
    }

    // --- Event bindings ---
    $("#postBtn")?.addEventListener("click", () => {
      const title = $("#postTitle").value.trim();
      const author = $("#postAuthor").value.trim();
      const body = $("#postBody").value.trim();
      if (!title || !body) { alert("ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }
      const post = { id: (crypto.randomUUID ? crypto.randomUUID() : String(Math.random())).toString(), title, author, body, createdAt: Date.now() };
      const data = JSON.parse(localStorage.getItem(LS_KEYS.BOARD) || "[]");
      data.push(post);
      localStorage.setItem(LS_KEYS.BOARD, JSON.stringify(data));
      $("#postTitle").value = ""; $("#postAuthor").value = ""; $("#postBody").value = "";
      loadBoard($("#searchInput").value);
    });

    $("#addNoticeBtn")?.addEventListener("click", () => {
      const title = $("#noticeTitleInput").value.trim();
      const author = $("#noticeAuthorInput").value.trim();
      const body = $("#noticeBodyInput").value.trim();
      if (!title || !body) { alert("ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }
      const n = { id: (crypto.randomUUID ? crypto.randomUUID() : String(Math.random())).toString(), title, author, body, createdAt: Date.now() };
      const data = JSON.parse(localStorage.getItem(LS_KEYS.NOTICE) || "[]");
      data.push(n);
      localStorage.setItem(LS_KEYS.NOTICE, JSON.stringify(data));
      $("#noticeTitleInput").value = ""; $("#noticeAuthorInput").value = ""; $("#noticeBodyInput").value = "";
      loadNotices();
    });

    $("#searchInput")?.addEventListener("input", (e)=> loadBoard(e.target.value));

    // --- Init ---
    ensureSeed();
    loadNotices();
    loadBoard();
    $("#year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
